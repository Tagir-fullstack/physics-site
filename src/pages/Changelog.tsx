import { motion } from 'framer-motion';
import { SITE_VERSION } from '../config/version';
import '../styles/page-layout.css';

interface ChangelogEntry {
  date: string;
  version?: string;
  changes: string[];
}

const changelog: ChangelogEntry[] = [
  {
    date: '15.02.2026',
    version: 'v1.2.10',
    changes: [
      'Новые видео анимаций: Альфа-распад, Бета-распад, Гамма-излучение',
      'Подробные описания для Бета-распада и Гамма-излучения (история, физика, формулы)',
      'Статус анимации — кнопка Status с цветовой индикацией (зелёный/жёлтый/красный)',
      'Боковые кнопки: Таблица Менделеева (изображение на весь экран) и Физические константы',
      'Таблица физических констант: фундаментальные константы, массы частиц, атомные и ядерные константы, характеристики излучения',
      'Адаптивная мобильная версия: статус под заголовком, видео на всю ширину, кнопки таблиц снизу',
      'Увеличен размер видеоплеера и текста описаний',
    ],
  },
  {
    date: '10.02.2026',
    version: 'v1.2.9',
    changes: [
      'Новая модель де Бройля: волновые орбиты с пульсирующими стоячими волнами (nλ = 2πr)',
      'Индикатор загрузки в статусе модели атома — показывает время до переключения',
      'Пауза переключения моделей при наведении курсора на атом',
      'Пауза по тапу на мобильных устройствах',
      'Контрастные цвета моделей атомов в светлой теме',
      'Убран текст «+ заряд» у модели Томсона',
      'Убрана обрезанная метка n=4 у модели Бора',
      'Длительность показа моделей уменьшена до 6 секунд',
      'Указано русское название платформы в условиях использования',
      'Обновлены картинки топиков: альфа-распад и опыт Резерфорда',
      'Убрана опция «Без анимаций» из панели доступности',
    ],
  },
  {
    date: '10.02.2026',
    version: 'v1.2.8',
    changes: [
      'Обновлены видео для Опыта Резерфорда и Альфа-распада',
      'Подробные форматированные описания видео (заголовки, списки, формулы, курсив)',
      'Поддержка JSX-описаний в PageTemplate',
      'Исправлена озвучка текста для форматированных описаний',
      'Кнопка «Назад» для возврата к предыдущему уроку на всех страницах',
      'Новый порядок уроков: Капельная модель ядра перенесена на 7-ю позицию',
      'Стили описаний: отступы между абзацами и списками',
    ],
  },
  {
    date: '09.02.2026',
    version: 'v1.2.7',
    changes: [
      'Новая возможность: режим доступности (инклюзивный режим)',
      'Кнопка доступности в хедере — открывает панель настроек',
      'Увеличение шрифта: А / А+ / А++ (масштабирование всего сайта)',
      'Светлая тема: полное переключение на светлый фон и тёмный текст',
      'Высокий контраст: усиленные границы и подчёркнутые заголовки',
      'Отключение анимаций для комфортного восприятия',
      'Кнопка озвучки текста (Web Speech API) на страницах видео и в тесте',
      'Все настройки доступности сохраняются в localStorage',
      'Адаптивное отображение иконки доступности на мобильных устройствах',
      'Уменьшен размер кнопки «Следующее» на мобильных устройствах',
      'Формат версии изменён на трёхзначный (vX.Y.Z)',
      'Настройка скорости озвучки (ползунок ×0.3 — ×2.5)',
      'Переработана модель Бора: UV-фотон → синий → красный (короткий цикл)',
      'Компактный футер на мобильных устройствах',
    ],
  },
  {
    date: '08.02.2026',
    version: 'v1.1.9.6',
    changes: [
      'Модель Зоммерфельда: 5 разноцветных эллиптических орбит (n=5) с физически верными пропорциями',
      'Новый блок «Субатомные частицы» — карточки протона, нейтрона и электрона с характеристиками и историей открытия',
      'Иконки частиц в стиле видео-анимаций (Manim)',
      'Свечение заголовка «АНИМАЦИИ»',
      'Исправлена мобильная версия: хедер, модели атомов, карточки, футер',
      'Адаптивная сетка карточек и футера на средних и малых экранах',
      'Тест по ядерной физике: тёмная тема, основной шрифт, валидация на русском языке',
      'Случайный порядок вопросов и вариантов ответов в тесте',
      'Фиксированная высота карточки вопроса — кнопки больше не прыгают',
      'Основной шрифт для заголовков на страницах видео',
    ],
  },
  {
    date: '07.02.2026',
    version: 'v1.1.9.5',
    changes: [
      'Полный редизайн сайта: новый шрифт, обновлённая цветовая схема',
      'Добавили чередующиеся модели атомов',
      'Обновили дизайн футера: чёрный фон, логотип Physez, новая компоновка',
      'Перенесли информацию о диссертации в футер',
      'Обновили страницу «Условия использования» — тёмная тема',
      'Обновили страницу «История изменений» — тёмная тема',
    ],
  },
  {
    date: '04.02.2026',
    version: 'v0.1.9.4',
    changes: [
      'Обновили анимацию бета-распада',
      'Добавили иконку и двухцветное название в хедере',
    ],
  },
  {
    date: '03.02.2026',
    version: 'v0.1.9.3',
    changes: [
      'Добавили систему версионирования',
    ],
  },
  {
    date: '02.02.2026',
    version: 'v0.1.9.2',
    changes: [
      'Изменили анимацию капельной модели ядра',
      'Добавили иконку сайта',
    ],
  },
  {
    date: '01.02.2026',
    version: 'v0.1.9.1',
    changes: [
      'Добавили страницу теста по ядерной физике с сохранением результатов в Supabase',
    ],
  },
];

export default function Changelog() {
  return (
    <motion.main
      className="page-content"
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      transition={{ duration: 0.5 }}
      style={{
        marginTop: '80px',
        minHeight: 'calc(100vh - 80px)',
        paddingTop: '1rem',
        paddingBottom: '4rem',
      }}
    >
      <div style={{ maxWidth: '900px', margin: '0 auto' }}>
        <h1
          style={{
            fontSize: '2.5rem',
            color: '#fff',
            marginBottom: '0.5rem',
            textAlign: 'center',
          }}
        >
          История изменений
        </h1>
        <p
          style={{
            textAlign: 'center',
            color: '#FC6255',
            fontSize: '1.1rem',
            marginBottom: '2rem',
            fontWeight: 500,
          }}
        >
          Текущая версия: {SITE_VERSION}
        </p>

        <div
          style={{
            backgroundColor: '#111',
            padding: '2.5rem',
            borderRadius: '15px',
            border: '1px solid #222',
            lineHeight: '1.8',
          }}
        >
          {changelog.map((entry, index) => (
            <section
              key={index}
              style={{
                marginBottom: index < changelog.length - 1 ? '2rem' : 0,
                paddingBottom: index < changelog.length - 1 ? '2rem' : 0,
                borderBottom:
                  index < changelog.length - 1
                    ? '1px solid #333'
                    : 'none',
              }}
            >
              <h2
                style={{
                  fontSize: '1.3rem',
                  marginBottom: '0.75rem',
                  color: '#fff',
                  display: 'flex',
                  justifyContent: 'space-between',
                  alignItems: 'center',
                }}
              >
                {entry.date}
                {entry.version && (
                  <span style={{ fontSize: '0.9rem', color: '#FC6255', fontWeight: 500 }}>
                    {entry.version}
                  </span>
                )}
              </h2>
              <ul
                style={{
                  color: '#ccc',
                  paddingLeft: '1.5rem',
                  margin: 0,
                }}
              >
                {entry.changes.map((change, i) => (
                  <li key={i} style={{ marginBottom: '0.3rem' }}>
                    {change}
                  </li>
                ))}
              </ul>
            </section>
          ))}
        </div>
      </div>
    </motion.main>
  );
}
